<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.18"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>My Project: MiRo-Project12a</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">My Project
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.18 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">MiRo-Project12a </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>This is the repository for SOFAR Project 12a.</p>
<p>Project by Jacopo Favaro, Fabrizio Zavanone, Muhammad Talha Siddiqui, Muhammad Tahir, Muhammad Sayum Ahmed, Syed Hani Kazmi Hussain.</p>
<h1><a class="anchor" id="autotoc_md1"></a>
Objective of the Project</h1>
<p>The project is aimed to build a software architecture to control, using audio commands, the social robot MiRo. MiRo has to perform simple actions like moving near a specified target, given its shape and colour.</p>
<h1><a class="anchor" id="autotoc_md2"></a>
Prerequisites</h1>
<h2><a class="anchor" id="autotoc_md3"></a>
ROS</h2>
<p>The project has been developed and tested with <a href="http://wiki.ros.org/kinetic/Installation/Ubuntu">ROS Kinetic</a>.</p>
<h2><a class="anchor" id="autotoc_md4"></a>
MIROapp v1.0</h2>
<p>To establish a connection with MiRo it is necessary to download and install <a href="http://labs.consequentialrobotics.com/download.php?file=miroapp-200107.apk">MiRo app</a> on a working Android device. MiRo and the device interact via bluetooth. After the connection has been established, simply put MiRo in normal mode and check for the correct behaviour (bridge running, files present, battery percentage displayed). In presence of any kind of problem, put back MiRo in demo mode (being sure that silent and immobile options are checked) and then back to normal.</p>
<h2><a class="anchor" id="autotoc_md5"></a>
MiRo Workstation Setup</h2>
<p>Download the <a href="http://labs.consequentialrobotics.com/miro/mdk/">Miro Developer kit</a>.</p>
<p>Follow the instructions from Consequential Robotics <a href="https://consequential.bitbucket.io/Developer_Preparation_Prepare_workstation.html">Miro: Prepare Workstation</a> to set up your workstation to work with the robot. Strictly follow the instructions in the <b>install mdk</b> section as the following steps will rely on this. It's not necessary to make static IP for your workstation (laptop) while setting up connection with MiRo. For a clear tutorial step-by-step you should visit <a href="https://github.com/EmaroLab/MIRO.git">Emarolab Miro Repository</a>.</p>
<h2><a class="anchor" id="autotoc_md6"></a>
ROS Based Speech Interface</h2>
<p>This module handles speech to text conversion. To install it, run in your catkin workpace's src folder:</p>
<div class="fragment"><div class="line">$ git clone https://github.com/EmaroLab/ros_verbal_interaction_node.git</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md7"></a>
OpenCV apps</h2>
<p>TO BE DONE</p>
<h1><a class="anchor" id="autotoc_md8"></a>
Architecture of the System</h1>
<p>The general structure of the system is shown in figure 1 below. The state machine is treated as a component which is subscribed to <code>/speech_to_text</code> and some MIRO topics. It also publishes to MIRO through the <code>/miro/rob01/platform/control</code> topic complex messages. The whole structure of the state machine is, instead, shown in figure 2.</p>
<h2><a class="anchor" id="autotoc_md9"></a>
Figure 1: Component Diagram</h2>
<p><img src="https://github.com/Thsuva/MiRo-Project12a/blob/state_machine/docs/ComponentDiagram_sm.jpeg" alt="" class="inline"/></p>
<h2><a class="anchor" id="autotoc_md10"></a>
Figure 2: State Machine</h2>
<p><img src="https://github.com/Thsuva/MiRo-Project12a/blob/state_machine/docs/StateMachine_sm.jpg" alt="" class="inline"/></p>
<h1><a class="anchor" id="autotoc_md11"></a>
Description of the Systemâ€™s Architecture</h1>
<h2><a class="anchor" id="autotoc_md12"></a>
Module &lt; state machine &gt;</h2>
<p>This module has been developed by Fabrizio Zavanone and Jacopo Favaro. It uses smach library with python 2.7. The files relative to this module are:</p>
<ul>
<li><b><a class="el" href="state__machine__main_8py.html" title="The node state_machine deals with the building of the state machine&#39;s structure.   The architecture o...">src/state_machine_main.py</a></b>: main file that builds the state machine, which is the back bone of the project</li>
<li><b>src/states/</b>: directory which contains all the needed states to make the state machine work (for more specific information, see the readme file inside the folder).</li>
<li><b><a class="el" href="parser_8py.html" title="The functions inside parser.py are usefull in order to extract information and keywords from the stri...">src/parser/parser.py</a></b>: file that contains the logic to clean up the input from <code>/speech_to_text</code> in order to get the required information (action, colour, target). To wake up MiRo, only the chosen "wake up word" (that can be modified inside this file) is needed.</li>
</ul>
<h2><a class="anchor" id="autotoc_md13"></a>
Module &lt; speech to text &gt;</h2>
<p>This module, that handles speech to text conversion, is taken from <a href="https://github.com/EmaroLab/ros_verbal_interaction_node.git">this repository</a>, which contains a web interface based on Google Speech Demo. Once runned, text converted from an audio input will be published on <code>/speech_to_text</code> alongside with its confidence and detected language. The interface also handles text to speech, but for our project we simply decided to discard this part by publishing on an unusubscribed topic. To do so, modify <a href="https://github.com/EmaroLab/ros_verbal_interaction_node/blob/master/java-script/speech_web_interface.html">speech_web_interface.html</a>, changing the topic name from <code>/text_to_speech</code> to something else.</p>
<h1><a class="anchor" id="autotoc_md14"></a>
Installation and System Testing</h1>
<p>To install the system, in your catkin workspace's src folder do:</p>
<div class="fragment"><div class="line">$ git clone https://github.com/Thsuva/MiRo-Project12a</div>
<div class="line">$ cd ..</div>
<div class="line">$ catkin_make</div>
</div><!-- fragment --><p>To run it, simply type and run:</p>
<div class="fragment"><div class="line">$ roslaunch MiRo-Project12a state_machine.launch</div>
</div><!-- fragment --><p><b>Be sure to launch the app to connect to MiRo only in this moment, otherwise there will be a failure of connection (MiRo topics won't be present in your rostopic list).</b></p>
<h2><a class="anchor" id="autotoc_md15"></a>
RQT graphs</h2>
<h3><a class="anchor" id="autotoc_md16"></a>
Jacopo Favaro and Fabrizio Zavanone modules</h3>
<p><img src="https://github.com/Thsuva/MiRo-Project12a/blob/state_machine/docs/rqt_graph.jpg" alt="" class="inline"/></p>
<h2><a class="anchor" id="autotoc_md17"></a>
Demonstration</h2>
<h3><a class="anchor" id="autotoc_md18"></a>
Happy state</h3>
<p>Here's a demo for the happy state (in this video it's simulated the fullfillment of the goal): MiRo behaves happily for 30 seconds and reacts to touch stimuli. The behaviour of MiRo is shown below, while <a href="https://unigeit-my.sharepoint.com/:v:/g/personal/s3947407_studenti_unige_it/EQMeZvnLBx9OluR2AFkJLnYBAy0914OEhMV20R6UC7Ny_g?e=WnhXjn">here</a> you can see what is going on in the terminal.</p>
<p><a href="https://unigeit-my.sharepoint.com/:v:/g/personal/s3947407_studenti_unige_it/ESkJzJxdhqROq0a3JLB8qZ8Bw03ZDNqTLj3ChaNlXdOLrw?e=xmkb9y"><img src="https://github.com/Thsuva/MiRo-Project12a/blob/state_machine/docs/MiRo_happy.png" alt="" class="inline"/></a></p>
<h3><a class="anchor" id="autotoc_md19"></a>
Failure state</h3>
<p>Here's a demo for the failure state: MiRo, after failing to understand the command, behaves sadly for 15 seconds. The behaviour of MiRo is shown below, while <a href="https://unigeit-my.sharepoint.com/:v:/g/personal/s3947407_studenti_unige_it/ERFIsZhbV3RBkqEenLSmBmQBOJXQS6WQeMMWzCbNfcP9Sw?e=ETsVVp">here</a> you can see what is going on in the terminal.</p>
<p><a href="https://unigeit-my.sharepoint.com/:v:/g/personal/s3947407_studenti_unige_it/ET7sVmuhv5JAlO0pEUt8FDcBmhItLRQtnhiZq7-rXuLdyA?e=jLgAcA"><img src="https://github.com/Thsuva/MiRo-Project12a/blob/state_machine/docs/MiRo_sad.png" alt="" class="inline"/></a></p>
<h1><a class="anchor" id="autotoc_md20"></a>
Report</h1>
<p>This is the link to the report: &lt;<a href="https://github.com/Thsuva/MiRo-Project12a/blob/state_machine/docs/Report_MiRo-12a.docx">Report_MiRo-12a</a>&gt;</p>
<h1><a class="anchor" id="autotoc_md21"></a>
Acknowledgments</h1>
<ul>
<li><a href="https://github.com/EmaroLab/ros_verbal_interaction_node.git">ros_verbal_interaction_node</a>: repository by Luca Buoncompagni</li>
<li><a href="https://github.com/EmaroLab/MiRo-training">MiRo-training</a>: repository by Roberta Delrio, Valentina Pericu</li>
</ul>
<h1><a class="anchor" id="autotoc_md22"></a>
Authors</h1>
<ul>
<li>Jacopo Favaro: <a href="#" onclick="location.href='mai'+'lto:'+'S39'+'47'+'407'+'@s'+'tud'+'en'+'ti.'+'un'+'ige'+'.i'+'t'; return false;">S3947<span style="display: none;">.nosp@m.</span>407@<span style="display: none;">.nosp@m.</span>stude<span style="display: none;">.nosp@m.</span>nti.<span style="display: none;">.nosp@m.</span>unige<span style="display: none;">.nosp@m.</span>.it</a></li>
<li>Fabrizio Zavanone: <a href="#" onclick="location.href='mai'+'lto:'+'S39'+'45'+'845'+'@s'+'tud'+'en'+'ti.'+'un'+'ige'+'.i'+'t'; return false;">S3945<span style="display: none;">.nosp@m.</span>845@<span style="display: none;">.nosp@m.</span>stude<span style="display: none;">.nosp@m.</span>nti.<span style="display: none;">.nosp@m.</span>unige<span style="display: none;">.nosp@m.</span>.it</a></li>
<li>FirstName LastName: <a href="#" onclick="location.href='mai'+'lto:'+'ema'+'il'+'@em'+'ai'+'l.c'+'om'; return false;">email<span style="display: none;">.nosp@m.</span>@ema<span style="display: none;">.nosp@m.</span>il.co<span style="display: none;">.nosp@m.</span>m</a> </li>
</ul>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.18
</small></address>
</body>
</html>
